# Copyright lowRISC contributors.
# Licensed under the Apache License, Version 2.0, see LICENSE for details.
# SPDX-License-Identifier: Apache-2.0


adapter driver ftdi
transport select jtag
ftdi vid_pid 0x0403 0x6011

#ftdi tdo_sample_edge falling

ftdi channel 0

adapter speed 250

#
# Our configuration:
#
# Bit  MPSSE     FT2232    JTAG    Type   RstVal  Description
# ----------------------------------------------------------------------
# Bit0 TCK       ADBUS0    TCK     Out    0       Clock Signal Output
# Bit1 TDI       ADBUS1    TDI     Out    0       Serial Data Out
# Bit2 TDO       ADBUS2    TDO     In     0       Serial Data In
# Bit3 TMS       ADBUS3    TMS     Out    1       Select Signal Out
# Bit4 GPIOL0    ADBUS4    nTRST   Out    1       General Purpose I/O
# Bit5 GPIOL1    ADBUS5    nSRST   Out    1       General Purpose I/O
# Bit6 GPIOL2    ADBUS6    0       Out    1       General Purpose I/O
# Bit7 GPIOL3    ADBUS7    0       Out    0       General Purpose I/O
#
# Bit6 GPIOL2 can be bridged to IOC5 using JP11 (TAP_STRAP1)
# Bit7 GPIOL3 can be bridged to IOC8 (TAP_STRAP0)

# This corresponds to the following reset values (first number), and
# in/out layout (second number):
ftdi layout_init 0x0078 0x00fb

# TAP reset (nTRST)
ftdi layout_signal nTRST -ndata 0x0010

# System Reset (nSRST)
ftdi layout_signal nSRST -ndata 0x0020


# FT2232 doesn't support open drain GPIO for reset pins
reset_config srst_push_pull trst_push_pull
